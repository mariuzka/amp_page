
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ein Simulationsexperiment durchführen &#8212; ABM mit Python</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8.2 Mit Schelling experimentieren" href="amp08b.html" />
    <link rel="prev" title="Ein kurzer Blick auf Pandas" href="amp08a_01_pandas.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ABM mit Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   ABM mit Python
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/amp01_intro.html">
   1.1 Einführung
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/amp01a_einf%C3%BChrung.html">
     Was ist ABM?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/amp01a_python_und_anaconda.html">
     Verwendete Software
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/amp01a_einstieg_python.html">
     Einstieg in Python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/amp01b.html">
   1.2 Warm-up
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/amp01c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/amp02_intro.html">
   2.1 Woraus alles besteht
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/amp02a_listen_agenten_populationen.html">
     Listen, Agenten &amp; Populationen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/amp02a_listenzugriff.html">
     Der Zugriff auf Listen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/amp02a_exkurs_funktionen_methoden.html">
     Exkurs: Funktionen &amp; Methoden
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/amp02a_listenmethoden.html">
     Grundlegende Listen-Methoden
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/amp02a_listenfunktionen.html">
     Nützliche Funktionen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/amp02b.html">
   2.2 Hinterlistige Übungen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/amp02c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/amp03_intro.html">
   3.1 Motoren der Simulation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_was_ist_for-loop.html">
     Was ist ein For-Loop?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_for-loops_in_python.html">
     For-Loops in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_exkurs_range.html">
     Exkurs: Zahlenreihen erstellen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_%C3%BCber_zahlenreihe_loopen.html">
     Loop durch Zahlenreihe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_variablen_ver%C3%A4ndern.html">
     Variablen verändern im Loop
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_exkurs_unver%C3%A4nderbare_objekte.html">
     Exkurs: (un-)veränderbare Objekte
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_listen_ver%C3%A4ndern.html">
     Listen verändern im Loop
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_exkurs_modulo.html">
     Exkurs: Modulo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_geschachtelte_for-loops.html">
     Geschachtelte For-Loops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03a_nutzen_for-loops.html">
     ABM &amp; For-Loops
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/amp03b.html">
   3.2 Gefangen im Loop
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/amp03c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/amp04_intro.html">
   4.1 Eine Brise Gefühl
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/amp04a_if-statements.html">
     If-Statements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/amp04a_boolsche_ausdr%C3%BCcke.html">
     Boolesche Ausdrücke
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/amp04a_if_else_elif.html">
     If, else, elif
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/amp04a_modul_import.html">
     Exkurs 1: Module importieren
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/amp04a_dicts.html">
     Exkurs 2: das Dictionary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/amp04b.html">
   4.2 Das NaSch-Modell
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/amp04c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/amp05_intro.html">
   5.1 Funktionen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_eigene_funktionen.html">
     Eigene Funktionen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_funktionen_ohne_input.html">
     Funktionen ohne In- und Output
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_funktionen_mit_input.html">
     Funktionen mit Input
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_funktionen_mit_output.html">
     Funktionen mit Output
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_standardwerte.html">
     Funktionen mit Standardwerten
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_scoping.html">
     Scopes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05a_docstrings.html">
     Docstrings
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/amp05b_funktionen.html">
   5.2 Funktionales Training
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/amp05c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../06/amp06_intro.html">
   6.1 Diagramme
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/amp06a_01_matplotlib.html">
     Matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/amp06a_02_funktionales_matplotlib.html">
     Funktionales Interface
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/amp06a_03_exkurs_mehrfachzuweisung.html">
     Exkurs: Mehrfachzuweisung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/amp06a_04_objektorientiertes_matplotlib.html">
     Objektorientiertes Interface
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../06/amp06b.html">
   6.2 Modelle sozialer Beeinflussung
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/amp06c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../07/amp07_intro.html">
   7.1 Diagramme &amp; Animationen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/amp07a_01_exkurs_matrix.html">
     Matrix als Welt der Agenten
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/amp07a_02_imshow.html">
     Matrix grafisch darstellen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/amp07a_03_celluloid.html">
     ABM animieren
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07/amp07b.html">
   7.2 Schellings Segregationsmodell
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="amp08_intro.html">
   8.1 Experimente &amp; Pandas
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="amp08a_01_pandas.html">
     Ein kurzer Blick auf Pandas
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Ein Simulationsexperiment durchführen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="amp08b.html">
   8.2 Mit Schelling experimentieren
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="amp08c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../09/amp09_intro.html">
   9.1 ABM mit OOP
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/amp09a_01_einf%C3%BChrung_oop.html">
     OOP in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/amp09a_02_bsp1.html">
     Beispiel 1: Soziale Beeinflussung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/amp09a_03_bsp2.html">
     Beispiel 2: Virusausbreitung
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../09/amp09b.html">
   9.2 Conway’s Game of Life
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/amp09c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../10/amp10_intro.html">
   10. Die Matching-Hypothese
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/amp10c.html">
     Lösungen
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/08/amp08a_02_simulationsexperiment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/mariuzka/amp_page"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/mariuzka/amp_page/issues/new?title=Issue%20on%20page%20%2F08/amp08a_02_simulationsexperiment.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/mariuzka/amp_page/master?urlpath=tree/08/amp08a_02_simulationsexperiment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-mit-einer-unabhangigen-variable">
   Experiment mit einer unabhängigen Variable
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-mit-zwei-unabhangigen-variablen">
   Experiment mit zwei unabhängigen Variablen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exkurs-ergebnisse-mit-seaborn-darstellen">
   Exkurs: Ergebnisse mit Seaborn darstellen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mehrere-replikationen-einer-parameterkombination">
   Mehrere Replikationen einer Parameterkombination
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Ein Simulationsexperiment durchführen</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-mit-einer-unabhangigen-variable">
   Experiment mit einer unabhängigen Variable
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-mit-zwei-unabhangigen-variablen">
   Experiment mit zwei unabhängigen Variablen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exkurs-ergebnisse-mit-seaborn-darstellen">
   Exkurs: Ergebnisse mit Seaborn darstellen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mehrere-replikationen-einer-parameterkombination">
   Mehrere Replikationen einer Parameterkombination
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="ein-simulationsexperiment-durchfuhren">
<h1>Ein Simulationsexperiment durchführen<a class="headerlink" href="#ein-simulationsexperiment-durchfuhren" title="Permalink to this headline">¶</a></h1>
<p>Um den Effekt eines Modellparameters auf den Ablauf der Simulation bzw. auf einen <em>Outcome</em> zu untersuchen, führt man typischerweise Simulationsexperimente durch. Dabei lässt man ein Modell mehrmals mit verschiedenen Parameterwerten laufen, misst für jedes Modell einen interessierenden “Output” mit einer geeigneten Maßzahl, vergleicht die Ergebnisse zwischen den Modellen und schaut, ob die Variation des Parameters einen Unterschied für die Ergebnisse des Modells macht. Mit Pandas haben wir jetzt das richtige Werkzeug, um die Daten eines solchen Simulationsexperimentes sinnvoll zu speichern und für weitere Analysen handhabbar zu machen.</p>
<p>Im Folgenden demonstriere ich beispielhaft die Durchführung eines einfachen Simulationsexperimentes und einer sinnvollen Speicherung der dabei entstehenden Output-Daten anhand des allseits beliebten NaSch-Modells. Ziel des Experimentes ist es zu untersuchen, welchen Einfluss die Verkehrsdichte sowie die indivuduelle Auftretenswahrscheinlichkeit des Trödelns auf die durchschnittlich gefahrene Geschwindigkeit der Population hat.</p>
<p>Für die Durchführung eines Simulationsexperimentes sollte man sein Simulationsmodell in Form einer Funktion vorliegen haben, welche die im Experiment zu manipulierenden Parameter als Input aufnimmt und das interessierende Outcome als Output aus Funktion herausgibt. Wie ich gleich zeige, bietet es sich an, den Modell-Output als Dictionary aus der Funktion herauszugeben, damit am Ende des Simulationsexperimentes für jeden Modelldurchlauf ein eigenes Dictionary mit den relevanten Informationen/Daten vorliegt. Dann können alle Dictionaries zu einem Pandas-Dataframe vereint werden.</p>
<p>Unten ist die schon öfter verwendete Implementierung des NaSch-Modells innerhalb einer Funktion namens <code class="docutils literal notranslate"><span class="pre">nasch_model()</span></code> zu sehen, wobei jedoch auf den Teil für die grafische Darstellung verzichtet wurde. Die Funktion nimmt einige Input-Parameter auf, worunter auch die für uns im Experiment relevanten Parameter sind. Über die den Parameter <code class="docutils literal notranslate"><span class="pre">initial_distance</span></code> bestimmen wir die anfängliche Distanz zwischen den Agenten auf der Straße und somit die Verkehrsdichte. Je höher die <code class="docutils literal notranslate"><span class="pre">initial_distance</span></code>, desto geringer ist die Verkehrsdichte. Über den Parameter <code class="docutils literal notranslate"><span class="pre">dawdling_prob</span></code> können wir zudem die Trödelwahrscheinlichkeit einstellen.</p>
<p>Die Parameter <code class="docutils literal notranslate"><span class="pre">intial_distance</span></code> und <code class="docutils literal notranslate"><span class="pre">dawdling_prob</span></code> sind quasi unsere <em>unabhängigen Variablen</em>, deren Einfluss auf die durchschnittlich gefahrene Geschwindigkeit wir untersuchen wollen. Die durchschnittlich gefahrene Geschwindigkeit ist somit unsere <em>abhängige Variable</em>. Diese abhängige Variable müssen wir natürlich irgendwie messen, weshalb ich den Code im Vergleich zu vorherigen Kapiteln etwas erweitern musste:</p>
<ul class="simple">
<li><p>Um die während der Simulation durchschnittlich gefahrene Geschwindigkeit zu messen, erstelle ich am Anfang der Funktion <code class="docutils literal notranslate"><span class="pre">nasch_model()</span></code> eine leere Liste namens <code class="docutils literal notranslate"><span class="pre">speed_data</span></code>.</p></li>
<li><p>In die Liste <code class="docutils literal notranslate"><span class="pre">speed_data</span></code> werden während der Simulation in jedem Zeitschritt und für jeden Agenten der aktuelle Geschwindigkeitswert angehängt. Den dafür notwendigen For-Loop findest du relativ weit unten im Code.</p></li>
<li><p>Nachdem alle Zeitschritte der Simulation durchgelaufen sind, wird die durchschnittliche Geschwindigkeit über alle Agenten und Zeitschritte berechnet und in der Variable <code class="docutils literal notranslate"><span class="pre">mean_speed</span></code> gespeichert.</p></li>
<li><p>Nun geschieht der wichtigste Schritt, welcher uns ein wohl strukturiertes Speichern der Daten innerhalb eines Dataframes erlaubt: Am Ende der Simulation wird ein Dictionary namens <code class="docutils literal notranslate"><span class="pre">output_dict</span></code> erstellt, in welchem alle relevanten Modelleigenschaften v.a. also die <em>Input</em>- und <em>Outputwerte</em> des Modells gespeichert werden. Dieses <code class="docutils literal notranslate"><span class="pre">output_dict</span></code> wird später eine Zeile eines Dataframes, welche die Daten mehrere Modelle beinhaltet, darstellen.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">nasch_model</span><span class="p">(</span>
    <span class="n">ticks</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> 
    <span class="n">max_speed</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">dawdling_prob</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">n_agents</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">initial_distance</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="p">):</span>
    
    <span class="c1"># Datencontainer zur Sammlung der gefahrenen Geschwindigkeiten</span>
    <span class="n">speed_data</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># Straßenlänge berechnen</span>
    <span class="n">street_len</span> <span class="o">=</span> <span class="n">n_agents</span> <span class="o">*</span> <span class="n">initial_distance</span>

    <span class="c1"># Leere Liste, die gleich mit Agenten befüllt wird</span>
    <span class="n">population</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># für jeden zu erstellenden Agenten</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_agents</span><span class="p">):</span>

        <span class="c1"># Agent als Dictionary erstellen</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
            <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">i</span> <span class="o">*</span> <span class="n">initial_distance</span><span class="p">,</span>
            <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="n">max_speed</span><span class="p">,</span>
            <span class="s2">&quot;space_ahead&quot;</span><span class="p">:</span> <span class="n">initial_distance</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Agent an die Populationsliste hängen</span>
        <span class="n">population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>


    <span class="c1"># Population nochmal überarbeiten - jeweils vorausfahrende und nachfahrende Agenten einspeichern</span>
    <span class="c1"># für jeden Agenten in Population</span>
    <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
        <span class="c1"># den vorausfahrenden Agenten merken/als Eigenschaft einspeichern</span>
        <span class="n">agent</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;agent_ahead&quot;</span><span class="p">:</span> <span class="n">population</span><span class="p">[(</span><span class="n">agent</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="k">len</span>(population)]})

        <span class="c1"># den nachfahrenden Agenten merken/als Eigenschaft einspeichern</span>
        <span class="n">agent</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;agent_behind&quot;</span><span class="p">:</span> <span class="n">population</span><span class="p">[(</span><span class="n">agent</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="k">len</span>(population)]})


    <span class="c1"># für jeden Zeitschritt</span>
    <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ticks</span><span class="p">):</span>

        <span class="c1"># für jeden Agenten (die vier Handlungsschritte umsetzen)</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
            <span class="c1"># 1. Acceleration</span>
            <span class="k">if</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">max_speed</span><span class="p">:</span>
                <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># 2. Slowing down</span>
            <span class="k">if</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;space_ahead&quot;</span><span class="p">]:</span>
                <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;space_ahead&quot;</span><span class="p">]</span>

            <span class="c1"># 3. Randomization</span>
            <span class="k">if</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">dawdling_prob</span><span class="p">:</span>
                <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>

            <span class="c1"># 4. Car motion</span>
            <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">agent</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">])</span> <span class="o">%</span> <span class="n">street_len</span>

        <span class="c1"># für jeden Agenten (die Anzahl der freien Straßenabschnitte neu berechnen)</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
            <span class="c1"># neue Anzahl der freien Zellen vor Agent berechnen und einspeichern</span>
            <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;space_ahead&quot;</span><span class="p">]</span> <span class="o">-=</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span>
            <span class="c1"># neue Anzahl der freien Zellen vor dem NACHFAHRENDEM Agent berechnen und DIESEM einspeichern</span>
            <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;agent_behind&quot;</span><span class="p">][</span><span class="s2">&quot;space_ahead&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span>

        
<span class="c1">################################################################################</span>
<span class="c1"># Geschwindigkeitsdaten sammeln, Durchschnitt berechnen und Output-Dict ausgeben</span>
<span class="c1">################################################################################</span>
        
        <span class="c1"># In jedem Zeitschritt von allen Agenten die aktuelle Geschwindigkeit sammeln</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
            <span class="n">speed_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">agent</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">])</span>
    
    <span class="c1"># Durchschnittliche Geschwindigkeit pro Agent pro Zeitschritt berechnen</span>
    <span class="n">mean_speed</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">speed_data</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_agents</span> <span class="o">/</span> <span class="n">ticks</span>
    
    
    <span class="c1"># Ausgabe-Dictionary mit Modellinformationen erstellen</span>
    <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;mean_speed&quot;</span><span class="p">:</span> <span class="n">mean_speed</span><span class="p">,</span>
        <span class="s2">&quot;initial_distance&quot;</span><span class="p">:</span> <span class="n">initial_distance</span><span class="p">,</span>
        <span class="s2">&quot;dawdling_prob&quot;</span><span class="p">:</span> <span class="n">dawdling_prob</span><span class="p">,</span>
        <span class="s2">&quot;ticks&quot;</span><span class="p">:</span> <span class="n">ticks</span><span class="p">,</span>
        <span class="s2">&quot;n_agents&quot;</span><span class="p">:</span> <span class="n">n_agents</span><span class="p">,</span>
    <span class="p">}</span>
    
    <span class="c1"># Ausgabe-Dictionary ausgeben</span>
    <span class="k">return</span> <span class="n">output_dict</span>
</pre></div>
</div>
</div>
</div>
<p>Lassen wir nun das Modell laufen, indem wir die obige Funktion ausführen, so bekommen wir ein Dictionary mit den relevanten Modellinformationen ausgegeben:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nasch_model</span><span class="p">(</span><span class="n">initial_distance</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;mean_speed&#39;: 1.6869,
 &#39;initial_distance&#39;: 3,
 &#39;dawdling_prob&#39;: 0.1,
 &#39;ticks&#39;: 100,
 &#39;n_agents&#39;: 100}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nasch_model</span><span class="p">(</span><span class="n">initial_distance</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;mean_speed&#39;: 0.0,
 &#39;initial_distance&#39;: 1,
 &#39;dawdling_prob&#39;: 0.1,
 &#39;ticks&#39;: 100,
 &#39;n_agents&#39;: 100}
</pre></div>
</div>
</div>
</div>
<p>Unsere Funktion ist nun soweit, dass sie uns für einen entsprechenden Parameter-Input das Simulationsmodell laufen lässen und uns anschließend einen kompakten Output mit allen relevanten Informationen zum vollzogenenen Modelldurchlauf in einem Dictionary zurückliefert. In einem Simulationsexperiment lassen führen wir die Funktion für verschiedene Parameter-Werte aus, speichern die jeweils zurückgegebenen Dictionaries mit den relevanten Informationen in einer Liste und können diese dann in einen Pandas-Dataframe überführen, um die Daten auszuwerten.</p>
<div class="section" id="experiment-mit-einer-unabhangigen-variable">
<h2>Experiment mit einer unabhängigen Variable<a class="headerlink" href="#experiment-mit-einer-unabhangigen-variable" title="Permalink to this headline">¶</a></h2>
<p>Untersuchen wir zunächst allein den Effekt der Verkehrsdichte auf die durchschnittliche Geschwindigkeit. Die Verkehrsdichte wird im Modell über das Argugment <code class="docutils literal notranslate"><span class="pre">initial_distance</span></code>, welche die anfängliche Distanz zwischen den Agenten auf der Straße angibt, gesteuert.</p>
<ul class="simple">
<li><p>In einer Liste <code class="docutils literal notranslate"><span class="pre">list_of_initial_distances</span></code> habe ich alle Werte, die im Experiment für <code class="docutils literal notranslate"><span class="pre">intial_distance</span></code> eingesetzt werden sollen, gespeichert. Natürlich hätte man hier auch z.B. die Funktion <code class="docutils literal notranslate"><span class="pre">range()</span></code> nutzen können, um eine solche Liste zu erstellen.</p></li>
<li><p>Die anfänglich leere Liste <code class="docutils literal notranslate"><span class="pre">data</span></code> ist dafür da, die Output-Dictionaries aller Simulationsdurchläufe zu sammeln</p></li>
<li><p>In einem For-Loop über die Liste <code class="docutils literal notranslate"><span class="pre">list_of_initial_distances</span></code> wird die Funktion nun nacheinander für alle Werte der Liste <code class="docutils literal notranslate"><span class="pre">list_of_initial_distances</span></code> aufgerufen, die Ergebnisse in der Variable <code class="docutils literal notranslate"><span class="pre">simulation_results</span></code> zwischengespeichert und schließlich an die Liste <code class="docutils literal notranslate"><span class="pre">data</span></code> angehängt.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Liste der im Experiment für den Parameter &quot;initial_distance&quot; einzusetzende Werte</span>
<span class="n">list_of_initial_distances</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

<span class="c1"># Liste für Sammlung der Output-Dictionaries der einzelnen Modelle</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># für jeden Parameterwert aus list_of_initial_distances</span>
<span class="k">for</span> <span class="n">initial_distance</span> <span class="ow">in</span> <span class="n">list_of_initial_distances</span><span class="p">:</span>
    
    <span class="c1"># Simulation laufen lassen</span>
    <span class="n">simulation_results</span> <span class="o">=</span> <span class="n">nasch_model</span><span class="p">(</span><span class="n">initial_distance</span><span class="o">=</span><span class="n">initial_distance</span><span class="p">)</span>
    
    <span class="c1"># Simulationsergebnisse an Sammelliste anhängen</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Als Ergebnis haben wir nun die Liste <code class="docutils literal notranslate"><span class="pre">data</span></code>, welche alle Informationen zu allen Modelldurchläufen enthält. Wie man unten sieht, ist die Liste <code class="docutils literal notranslate"><span class="pre">data</span></code> eine Liste mit Dictionaries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;mean_speed&#39;: 0.0,
  &#39;initial_distance&#39;: 1,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 0.8339,
  &#39;initial_distance&#39;: 2,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 1.6796,
  &#39;initial_distance&#39;: 3,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 2.5006,
  &#39;initial_distance&#39;: 4,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 3.4216,
  &#39;initial_distance&#39;: 5,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.0746,
  &#39;initial_distance&#39;: 6,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.8,
  &#39;initial_distance&#39;: 7,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.8506,
  &#39;initial_distance&#39;: 8,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.8812,
  &#39;initial_distance&#39;: 9,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.8924,
  &#39;initial_distance&#39;: 10,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.904100000000001,
  &#39;initial_distance&#39;: 20,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.8979,
  &#39;initial_distance&#39;: 30,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100},
 {&#39;mean_speed&#39;: 4.9035,
  &#39;initial_distance&#39;: 100,
  &#39;dawdling_prob&#39;: 0.1,
  &#39;ticks&#39;: 100,
  &#39;n_agents&#39;: 100}]
</pre></div>
</div>
</div>
</div>
<p>Wie wir eben gelernt haben, können wir Dataframes aus solchen Listen mit gleichartigen Dictionaries erstellen, was ich im Folgenden tue:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Das Ergebnis ist ein übersichtlicher, tabellenförmiger Datensatz mit den Daten unseres Simulationsexperimentes. Jede Zeile entspricht einem Dictionary der Liste <code class="docutils literal notranslate"><span class="pre">data</span></code> und repräsentiert somit die Ergebnisse/Informationen eines Simulationsdurchgang.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean_speed</th>
      <th>initial_distance</th>
      <th>dawdling_prob</th>
      <th>ticks</th>
      <th>n_agents</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0000</td>
      <td>1</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.8339</td>
      <td>2</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.6796</td>
      <td>3</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.5006</td>
      <td>4</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.4216</td>
      <td>5</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4.0746</td>
      <td>6</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>6</th>
      <td>4.8000</td>
      <td>7</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>7</th>
      <td>4.8506</td>
      <td>8</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>8</th>
      <td>4.8812</td>
      <td>9</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>9</th>
      <td>4.8924</td>
      <td>10</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4.9041</td>
      <td>20</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>11</th>
      <td>4.8979</td>
      <td>30</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>12</th>
      <td>4.9035</td>
      <td>100</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>(An dieser Stelle könnte man nun bereits mittels <code class="docutils literal notranslate"><span class="pre">df.to_csv(DATEIPFAD)</span></code> den Datensatz exportieren und in einem beliebigen Statistik-Programm aufbereiten und auswerten.)</p>
<p>Um den Effekt der Verkehrsdichte auf die Durchschnittsgeschwindigkeit besser interpretieren zu können, ist sinnvoll die Verkehrsdichte als <em>Anteil der Straße, der durch Agenten belegt ist</em>, anzugeben. Dafür erstelle im im Folgenden eine neue Dataframe-Spalte <code class="docutils literal notranslate"><span class="pre">df[&quot;traffic_density&quot;]</span></code>, welche ich als <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">/</span> <span class="pre">df[&quot;initial_distance&quot;]</span></code> berechne.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;traffic_density&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;initial_distance&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean_speed</th>
      <th>initial_distance</th>
      <th>dawdling_prob</th>
      <th>ticks</th>
      <th>n_agents</th>
      <th>traffic_density</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0000</td>
      <td>1</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.8339</td>
      <td>2</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.6796</td>
      <td>3</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.333333</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.5006</td>
      <td>4</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.250000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.4216</td>
      <td>5</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4.0746</td>
      <td>6</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>6</th>
      <td>4.8000</td>
      <td>7</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.142857</td>
    </tr>
    <tr>
      <th>7</th>
      <td>4.8506</td>
      <td>8</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.125000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>4.8812</td>
      <td>9</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.111111</td>
    </tr>
    <tr>
      <th>9</th>
      <td>4.8924</td>
      <td>10</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4.9041</td>
      <td>20</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.050000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>4.8979</td>
      <td>30</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.033333</td>
    </tr>
    <tr>
      <th>12</th>
      <td>4.9035</td>
      <td>100</td>
      <td>0.1</td>
      <td>100</td>
      <td>100</td>
      <td>0.010000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Die Ergebnisse könnte man nun natürlich mithilfe von Matplotlib grafisch anzeigen. Dafür kann man die relevanten Spalten einzeln anwählen und z.B. in die Funktion <code class="docutils literal notranslate"><span class="pre">plt.plot()</span></code> eingeben, so wie ich es unten tue.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;traffic_density&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;mean_speed&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Verkehrsdichte&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Durschnittliche Geschwindigkeit&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/amp08a_02_simulationsexperiment_19_0.png" src="../_images/amp08a_02_simulationsexperiment_19_0.png" />
</div>
</div>
<p>Die Ergebnisse des Experimentes zeigen bisher, dass eine Erhöhung der Verkehrsdichte nach einem anfänglichen Plateu bei sehr niedriger Straßenauslastung zu einem sehr starken Absinken der durchschnittlich gefahrenen Geschwindigkeit führt. Es gibt somit einen <em>kritischen Punkt</em>, wo eine Erhöhung der Verkehrsdichte zu einem rapiden Ausbremsen des Verkehrs führt.</p>
<p>Mit Matplotlib wird das Anzeigen der Ergebnisse aber spätestens, wenn wir eine dritte Variable im Diagramm darstellen wollen, unnötig kompliziert, weshalb wir in Kürze einen kurzen Blick auf das Grafik-Paket <strong>Seaborn</strong> werfen werden</p>
</div>
<div class="section" id="experiment-mit-zwei-unabhangigen-variablen">
<h2>Experiment mit zwei unabhängigen Variablen<a class="headerlink" href="#experiment-mit-zwei-unabhangigen-variablen" title="Permalink to this headline">¶</a></h2>
<p>Nun wollen wir in einem weiteren Experiment prüfen, welche Rolle das Ausmaß von unnötigem Abbremsen d.h. der Höhe der Trödelwahrscheinlichkeit für den Zusammenhang zwischen Verkehrsdichte und Durchschnittsgeschwindkeit spielt. Genaugenommen prüfen wir damit einen sogenannten Interaktionseffekt bzw. eine Moderation.</p>
<p>Im Folgenden lasse ich die Funktion <code class="docutils literal notranslate"><span class="pre">nasch_model()</span></code> nicht nur mit unterschiedlichen Werten für das Argument <code class="docutils literal notranslate"><span class="pre">initial_distance</span></code> laufen, sondern zudem lasse ich mithilfe eines zweiten For-Loops ebenfalls die Werte für das Argument <code class="docutils literal notranslate"><span class="pre">dawdling_prob</span></code> (die Trödelwahrscheinlichkeit) variieren. Dadurch wird das obige Experiment für verschiedene Werte der Trödelwahrscheinlichkeit jeweils komplett wiederholt.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Liste der im Experiment für den Parameter &quot;dawdling_prob&quot; einzusetzende Werte</span>
<span class="n">list_of_dawdling_probs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]</span>

<span class="c1"># Liste der im Experiment für den Parameter &quot;initial_distance&quot; einzusetzende Werte</span>
<span class="n">list_of_initial_distances</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

<span class="c1"># Liste für Sammlung der Output-Dictionaries der einzelnen Modelle</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>

 <span class="c1"># für jeden Parameterwert aus list_of_dawdling_probs</span>
<span class="k">for</span> <span class="n">dawdling_prob</span> <span class="ow">in</span> <span class="n">list_of_dawdling_probs</span><span class="p">:</span>
    
    <span class="c1"># für jeden Parameterwert aus list_of_initial_distances</span>
    <span class="k">for</span> <span class="n">initial_distance</span> <span class="ow">in</span> <span class="n">list_of_initial_distances</span><span class="p">:</span>

        <span class="c1"># Simulation laufen lassen; initiale Distanz &amp; Trödelwahrscheinlichkeit einsetzen</span>
        <span class="n">simulation_results</span> <span class="o">=</span> <span class="n">nasch_model</span><span class="p">(</span><span class="n">initial_distance</span><span class="o">=</span><span class="n">initial_distance</span><span class="p">,</span> <span class="n">dawdling_prob</span><span class="o">=</span><span class="n">dawdling_prob</span><span class="p">)</span>

        <span class="c1"># Simulationsergebnisse an Sammelliste anhängen</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Nun überführe ich die gesammelten Daten in einen Dataframe und berechne wieder die Verkehrsdichte als Anteilswert der Straßenbelegung:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Liste von Dictionaries in Dataframe umwandeln</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Verkehrsdichte als Anteilswert berechnen</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;traffic_density&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;initial_distance&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Schauen wir uns den Dataframe an. Dieser ist nun insgesamt drei mal so lang wie im vorherigen Experiment. Wie man nun sehen kann, variiert nun nicht nur die <code class="docutils literal notranslate"><span class="pre">inital_distance</span></code> sondern auch die <code class="docutils literal notranslate"><span class="pre">dawdling_prob</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean_speed</th>
      <th>initial_distance</th>
      <th>dawdling_prob</th>
      <th>ticks</th>
      <th>n_agents</th>
      <th>traffic_density</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0000</td>
      <td>1</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0000</td>
      <td>2</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0000</td>
      <td>3</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.333333</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.0000</td>
      <td>4</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.250000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4.0000</td>
      <td>5</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5.0000</td>
      <td>6</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>6</th>
      <td>5.0000</td>
      <td>7</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.142857</td>
    </tr>
    <tr>
      <th>7</th>
      <td>5.0000</td>
      <td>8</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.125000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>5.0000</td>
      <td>9</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.111111</td>
    </tr>
    <tr>
      <th>9</th>
      <td>5.0000</td>
      <td>10</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>5.0000</td>
      <td>20</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.050000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>5.0000</td>
      <td>30</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.033333</td>
    </tr>
    <tr>
      <th>12</th>
      <td>5.0000</td>
      <td>100</td>
      <td>0.0</td>
      <td>100</td>
      <td>100</td>
      <td>0.010000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0.0000</td>
      <td>1</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>14</th>
      <td>0.7248</td>
      <td>2</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>1.4228</td>
      <td>3</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.333333</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2.1135</td>
      <td>4</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.250000</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2.7596</td>
      <td>5</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>18</th>
      <td>3.4778</td>
      <td>6</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>19</th>
      <td>4.2872</td>
      <td>7</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.142857</td>
    </tr>
    <tr>
      <th>20</th>
      <td>4.6901</td>
      <td>8</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.125000</td>
    </tr>
    <tr>
      <th>21</th>
      <td>4.7630</td>
      <td>9</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.111111</td>
    </tr>
    <tr>
      <th>22</th>
      <td>4.7695</td>
      <td>10</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>23</th>
      <td>4.8011</td>
      <td>20</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.050000</td>
    </tr>
    <tr>
      <th>24</th>
      <td>4.8066</td>
      <td>30</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.033333</td>
    </tr>
    <tr>
      <th>25</th>
      <td>4.7968</td>
      <td>100</td>
      <td>0.2</td>
      <td>100</td>
      <td>100</td>
      <td>0.010000</td>
    </tr>
    <tr>
      <th>26</th>
      <td>0.0000</td>
      <td>1</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>27</th>
      <td>0.4873</td>
      <td>2</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>28</th>
      <td>0.9705</td>
      <td>3</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.333333</td>
    </tr>
    <tr>
      <th>29</th>
      <td>1.5063</td>
      <td>4</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.250000</td>
    </tr>
    <tr>
      <th>30</th>
      <td>1.9371</td>
      <td>5</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>31</th>
      <td>2.4750</td>
      <td>6</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>32</th>
      <td>3.0891</td>
      <td>7</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.142857</td>
    </tr>
    <tr>
      <th>33</th>
      <td>3.7732</td>
      <td>8</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.125000</td>
    </tr>
    <tr>
      <th>34</th>
      <td>4.4661</td>
      <td>9</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.111111</td>
    </tr>
    <tr>
      <th>35</th>
      <td>4.5563</td>
      <td>10</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>36</th>
      <td>4.5978</td>
      <td>20</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.050000</td>
    </tr>
    <tr>
      <th>37</th>
      <td>4.6051</td>
      <td>30</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.033333</td>
    </tr>
    <tr>
      <th>38</th>
      <td>4.6011</td>
      <td>100</td>
      <td>0.4</td>
      <td>100</td>
      <td>100</td>
      <td>0.010000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Wie man nun das Ergebnis eines solchen Experimentes in einem Diagramm mit 3 Variablen darstellen kann, schauen wir uns im Folgenden Exkurs zum Paket Seaborn an.</p>
</div>
<div class="section" id="exkurs-ergebnisse-mit-seaborn-darstellen">
<h2>Exkurs: Ergebnisse mit Seaborn darstellen<a class="headerlink" href="#exkurs-ergebnisse-mit-seaborn-darstellen" title="Permalink to this headline">¶</a></h2>
<p>Um den gemeinsamen Effekt der Verkehrsdichte und der Trödelwahscheinlichkeit auf die Durchschnittsgeschwindigkeit darzustellen, bietet sich u.a. ein Linien-Diagramm an, in welchem der Zusammenhang zwischen Verkehrsdichte und Durchschnittsgeschwindigkeit getrennt nach jeweilige Trödelwahscheinlichkeit abgetragen ist. Für solche Diagramme ist Matplotlib allerdings unnötig kompliziert, weshalb ich empfehle mal einen Blick auf das Paket <a class="reference external" href="https://seaborn.pydata.org/">Seaborn</a> zu werfen. Mit Seaborn kann man Daten relativ unkompliziert gruppiert nach einer dritten Variable anzeigen lassen. Zudem ist Seaborn auf die Verwendung von Pandas-Dataframes zugeschnitten.</p>
<ul class="simple">
<li><p>Nachdem Seaborn über den Anaconda-Navigator installiert wurde, kann dieses als <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">seaborn</span> <span class="pre">as</span> <span class="pre">sns</span></code> importiert werden.</p></li>
<li><p>Mit <code class="docutils literal notranslate"><span class="pre">sns.set_theme()</span></code> stelle ich das Standard-Farbschema ein.</p></li>
<li><p>Für Liniendiagramme bietet Seaborn die Funktion <code class="docutils literal notranslate"><span class="pre">lineplot()</span></code>. Diese erwartet, dass man unter dem Argument <code class="docutils literal notranslate"><span class="pre">data</span></code> einen Dataframe angibt, in dem die zu plottenden Daten stecken. Mit den Argumenten <code class="docutils literal notranslate"><span class="pre">x</span></code> und <code class="docutils literal notranslate"><span class="pre">y</span></code> gibt man jeweils die Namen der Dataframe-Spalten an, welche auf X- und Y-Achse geplottet werden sollen, an. Mit dem Argument <code class="docutils literal notranslate"><span class="pre">hue</span></code> kann man die Daten nun noch nach einer dritten Variable gruppieren. Unten gebe ich für <code class="docutils literal notranslate"><span class="pre">hue</span></code> den Spalte <code class="docutils literal notranslate"><span class="pre">&quot;dawdling_prob&quot;</span></code> an, sodass die Simulationsergebnisse jeweils getrennt nach der eingestellten Trödelwahrscheinlichkeit angezeigt werden.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Seaborn importieren</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1"># Standard-Farbschema einstellen</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">()</span>

<span class="c1"># Seaborn-Liniendiagramm</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="c1"># Dataframe, in welchem sich die Variablen/Spalten befinden</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;traffic_density&quot;</span><span class="p">,</span> <span class="c1"># X-Variable</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;mean_speed&quot;</span><span class="p">,</span> <span class="c1"># Y-Variable</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;dawdling_prob&quot;</span><span class="p">,</span> <span class="c1"># Gruppierungsvariable / Z-Variable</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;traffic_density&#39;, ylabel=&#39;mean_speed&#39;&gt;
</pre></div>
</div>
<img alt="../_images/amp08a_02_simulationsexperiment_29_1.png" src="../_images/amp08a_02_simulationsexperiment_29_1.png" />
</div>
</div>
<p>Die Ergebnisse zeigen, dass durch das Vorhandensein von “Trödeln” u.a. der Kipp-Punkt, ab welchem eine Erhöhung der Verkehrsdichte die gefahrene Durchschnittsgeschwindigkeit deutlich absenkt, bereits bei niedrigeren Verkehrsdichten auftritt.</p>
</div>
<div class="section" id="mehrere-replikationen-einer-parameterkombination">
<h2>Mehrere Replikationen einer Parameterkombination<a class="headerlink" href="#mehrere-replikationen-einer-parameterkombination" title="Permalink to this headline">¶</a></h2>
<p>Spielt in einem Simulationsmodell der Zufall eine große Rolle, dann ist es gängige Praxis, für jede Kombination an Parametern mehrere Wiederholungen des Modells zu rechnen und dann den Mittelwert über alle Wiederholungen pro Parameterkombination zu berechnen, um eventuellen Zufallsschwankungen auf der interessierenden abhängigen Variable entgegenzuwirken.</p>
<p>Ein Weg, um mehrere Replikationen für eine Parameterkombination laufen zu lassen, kann sein, einfach einen weiteren For-Loop zu verwenden, um für jede Parameterkombination eine bestimmte Anzahl an Wiederholungen der Modelldurchläufe laufen zu lassen. Unten füge ich daher in den bisherigen Code einen weiteren For-Loop <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">replication</span> <span class="pre">in</span> <span class="pre">range(10):</span></code> ein, welcher bewirkt, dass die Funktion <code class="docutils literal notranslate"><span class="pre">nasch_model()</span></code> 10 mal für jede Kombination von <code class="docutils literal notranslate"><span class="pre">dawdling_prob</span></code> und <code class="docutils literal notranslate"><span class="pre">initial_distance</span></code> ausgeführt wird und die Daten gespeichert werden. Der Output-Datensatz wird dadurch demendsprechend nochmal um den Faktor 10 länger.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Liste der im Experiment für den Parameter &quot;dawdling_prob&quot; einzusetzende Werte</span>
<span class="n">list_of_dawdling_probs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]</span>

<span class="c1"># Liste der im Experiment für den Parameter &quot;initial_distance&quot; einzusetzende Werte</span>
<span class="n">list_of_initial_distances</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

<span class="c1"># Liste für Sammlung der Output-Dictionaries der einzelnen Modelle</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>

 <span class="c1"># für jeden Parameterwert aus list_of_dawdling_probs</span>
<span class="k">for</span> <span class="n">dawdling_prob</span> <span class="ow">in</span> <span class="n">list_of_dawdling_probs</span><span class="p">:</span>
    
    <span class="c1"># für jeden Parameterwert aus list_of_initial_distances</span>
    <span class="k">for</span> <span class="n">initial_distance</span> <span class="ow">in</span> <span class="n">list_of_initial_distances</span><span class="p">:</span>
        
        <span class="c1"># 10 Wiederholungen </span>
        <span class="k">for</span> <span class="n">replication</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>

            <span class="c1"># Simulation laufen lassen; initiale Distanz &amp; Trödelwahrscheinlichkeit einsetzen</span>
            <span class="n">simulation_results</span> <span class="o">=</span> <span class="n">nasch_model</span><span class="p">(</span><span class="n">initial_distance</span><span class="o">=</span><span class="n">initial_distance</span><span class="p">,</span> <span class="n">dawdling_prob</span><span class="o">=</span><span class="n">dawdling_prob</span><span class="p">)</span>

            <span class="c1"># Simulationsergebnisse an Sammelliste anhängen</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">)</span>


    
<span class="c1"># Liste von Dictionaries in Dataframe umwandeln</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Verkehrsdichte als Anteilswert berechnen</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;traffic_density&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;initial_distance&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Das praktische an Seaborn ist nun, dass es ganz von alleine merkt, dass für jede Kombination der Parameter in unserem Datensatz mehrere Zeilen vorliegen, rechnet selbständig den Mittelwert für jede Parameterkombination und zeigt diesen dann im Liniendiagramm an.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Seaborn-Liniendiagramm</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="c1"># Dataframe, in welchem sich die Variablen/Spalten befinden</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;traffic_density&quot;</span><span class="p">,</span> <span class="c1"># X-Variable</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;mean_speed&quot;</span><span class="p">,</span> <span class="c1"># Y-Variable</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;dawdling_prob&quot;</span><span class="p">,</span> <span class="c1"># Gruppierungsvariable / Z-Variable</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;traffic_density&#39;, ylabel=&#39;mean_speed&#39;&gt;
</pre></div>
</div>
<img alt="../_images/amp08a_02_simulationsexperiment_34_1.png" src="../_images/amp08a_02_simulationsexperiment_34_1.png" />
</div>
</div>
<p>Eigentlich zeigt Seaborn auch automatisch ein Art Konfidenzintervall um die berechneten Mitttelwerte an. Im Falle des NaSch-Modells scheint die Streuung zwischen den einzelnen Simulationen mit gleichen Parametern allerdings so gering zu sein, dass man dieses im obigen Diagramm nicht sieht.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-amp-py"
        },
        kernelOptions: {
            kernelName: "conda-env-amp-py",
            path: "./08"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-amp-py'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="amp08a_01_pandas.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Ein kurzer Blick auf Pandas</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="amp08b.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">8.2 Mit Schelling experimentieren</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Marius Kaffai<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>